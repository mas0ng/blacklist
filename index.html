<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blacklist Details</title>
</head>
<body>

<script>
    // Function to parse URL parameters
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    // Get the value after 'ref=' in the URL
    var refValue = getParameterByName('ref');

    // Fetch the JSON file based on the ref value
    fetch(refValue + '.json')
        .then(response => response.json())
        .then(data => {
            // Extract data from the JSON
            var title = data.title;
            var reasons = data.reasons;
            var outcome = data.outcome;
            var date = new Date(data.until);
            var now = new Date();
            var daysLeft = Math.ceil((date - now) / (1000 * 60 * 60 * 24));

            // Update HTML elements with the fetched data
            document.title = title;
            document.getElementById('title').innerText = title;
            document.getElementById('blacklistedUntil').innerText = "Blacklisted until: " + date.toLocaleDateString();
            document.getElementById('daysLeft').innerText = daysLeft + " days left";
            if (daysLeft <= 0) {
                document.getElementById('daysLeft').innerText = "Blacklist over";
            }
            document.getElementById('reasons').innerText = reasons;
            document.getElementById('outcome').innerText = outcome;
        })
        .catch(error => console.error('Error fetching data:', error));
</script>

<h1 id="title"></h1>
<p id="blacklistedUntil"></p>
<p id="daysLeft"></p>
<p><strong>Reasons:</strong> <span id="reasons"></span></p>
<p><strong>Outcome:</strong> <span id="outcome"></span></p>

</body>
</html>
